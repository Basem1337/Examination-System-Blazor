@page "/"
@inject NavigationManager NavigationManager
@inject AuthenticationStateProvider AuthProvider

<PageTitle>Home</PageTitle>

<div style="width: 75vw; height: 280px; overflow: hidden; border-radius:10px;">
    <img src="homebg.jpg" alt="Alternate Text" style="width: 100%; height: 100%; object-fit: cover;" />
</div>



<h1 class="mt-5">Welcome!</h1>

<p class="mt-3">This is the home page of the Examination System. Happy to see you on board.</p>


<button class="btn text-white mt-3 pa-3" style="background: linear-gradient(to right, #fc6767, #ec008c);" @onclick="NavigateToDashboard">Go to Dashboard</button>

@code {
    private string? userId;
    private string? userRole;

    protected override async Task OnInitializedAsync()
    {
        var authState = await AuthProvider.GetAuthenticationStateAsync();
        var user = authState.User;

        userId = user.FindFirst(ClaimTypes.NameIdentifier)?.Value;
        userRole = user.FindFirst(ClaimTypes.Role)?.Value;

    }

    private void NavigateToDashboard()
    {
        if (userRole == "Instructor")
        {    
            NavigationManager.NavigateTo("dashboard");
        }
        else
        {
            NavigationManager.NavigateTo("studentDashboard");
        }
    }
}
